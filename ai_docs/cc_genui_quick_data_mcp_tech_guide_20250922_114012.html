<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>quick-data-mcp é¡¹ç›®æŠ€æœ¯æŒ‡å—</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 20px;
            background: #f8f9fa;
        }
        
        article {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 8px;
            margin-top: 30px;
            margin-bottom: 20px;
        }
        
        h3 {
            color: #34495e;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        
        h4 {
            color: #34495e;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Courier New', monospace;
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 4px;
            border: 1px solid #e1e8ed;
        }
        
        pre {
            background: #f8f9fa;
            border: 1px solid #e1e8ed;
            border-left: 4px solid #007acc;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        pre code {
            background: none;
            padding: 0;
            border: none;
            border-radius: 0;
        }
        
        .info-section {
            background: #e8f4f8;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .success-section {
            background: #e8f5e8;
            border-left: 4px solid #27ae60;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .warning-section {
            background: #fef9e7;
            border-left: 4px solid #f39c12;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .file-tree {
            background: #f8f9fa;
            border: 1px solid #e1e8ed;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            white-space: pre;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        table th,
        table td {
            border: 1px solid #e1e8ed;
            padding: 12px;
            text-align: left;
        }
        
        table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }
        
        table tbody tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }
        
        li {
            margin: 8px 0;
        }
        
        .architecture-diagram {
            background: #f8f9fa;
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .component-box {
            display: inline-block;
            background: white;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            padding: 10px 15px;
            margin: 5px;
            min-width: 120px;
        }
        
        .arrow {
            font-size: 24px;
            color: #3498db;
            margin: 0 10px;
        }
        
        .step-number {
            background: #3498db;
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .expandable {
            cursor: pointer;
            user-select: none;
        }
        
        .expandable:hover {
            background: #f0f0f0;
        }
        
        .collapsed {
            display: none;
        }
        
        .toc {
            background: #f8f9fa;
            border: 1px solid #e1e8ed;
            border-radius: 4px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .toc ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .toc a {
            color: #3498db;
            text-decoration: none;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <article>
        <header>
            <h1>ğŸš€ quick-data-mcp é¡¹ç›®æŠ€æœ¯æŒ‡å—</h1>
            <p><strong>é¡¹ç›®åç§°:</strong> quick-data-mcp</p>
            <p><strong>ç”Ÿæˆæ—¶é—´:</strong> 2025å¹´9æœˆ22æ—¥</p>
            <p><strong>ç‰ˆæœ¬:</strong> 0.1.0</p>
        </header>

        <div class="toc">
            <h3>ğŸ“‹ ç›®å½•</h3>
            <ul>
                <li><a href="#overview">1. é¡¹ç›®æ¦‚è§ˆ</a></li>
                <li><a href="#architecture">2. æ¶æ„è®¾è®¡</a></li>
                <li><a href="#directory-structure">3. ç›®å½•ç»“æ„</a></li>
                <li><a href="#implementation-patterns">4. å®ç°æ¨¡å¼</a></li>
                <li><a href="#adding-tools">5. æ·»åŠ æ–°çš„ MCP Server Tool</a></li>
                <li><a href="#adding-prompts">6. æ·»åŠ æ–°çš„ MCP Server Prompt</a></li>
                <li><a href="#extensibility">7. å¯æ‰©å±•æ€§è®¾è®¡</a></li>
                <li><a href="#best-practices">8. æœ€ä½³å®è·µ</a></li>
            </ul>
        </div>

        <main>
            <section id="overview">
                <h2>1. é¡¹ç›®æ¦‚è§ˆ</h2>
                
                <div class="info-section">
                    <h3>â„¹ï¸ é¡¹ç›®å®šä½</h3>
                    <p><strong>quick-data-mcp</strong> æ˜¯ä¸€ä¸ªä¸“æ³¨äºæ•°æ®åˆ†æçš„ Model Context Protocol (MCP) æœåŠ¡å™¨ï¼Œä¸º AI ä»£ç†æä¾›å¼ºå¤§çš„æ•°æ®åˆ†æèƒ½åŠ›ã€‚</p>
                </div>

                <h3>æ ¸å¿ƒç‰¹æ€§</h3>
                <ul>
                    <li><strong>æ•°æ®åŠ è½½å’Œç®¡ç†</strong>ï¼šæ”¯æŒ CSVã€JSON æ ¼å¼çš„æ•°æ®é›†åŠ è½½</li>
                    <li><strong>æ™ºèƒ½åˆ†æå·¥å…·</strong>ï¼šæä¾› 18+ ç§æ•°æ®åˆ†æå·¥å…·</li>
                    <li><strong>åŠ¨æ€èµ„æºç³»ç»Ÿ</strong>ï¼šåŸºäºæ•°æ®ç‰¹å¾çš„åŠ¨æ€èµ„æºè®¿é—®</li>
                    <li><strong>æ™ºèƒ½æç¤ºç³»ç»Ÿ</strong>ï¼š9 ç§é’ˆå¯¹ä¸åŒåˆ†æåœºæ™¯çš„æ™ºèƒ½æç¤º</li>
                    <li><strong>æ¨¡å—åŒ–æ¶æ„</strong>ï¼šå®Œå…¨è§£è€¦çš„å¯æ‰©å±•è®¾è®¡</li>
                </ul>

                <h3>æŠ€æœ¯æ ˆ</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ç»„ä»¶</th>
                            <th>æŠ€æœ¯</th>
                            <th>ç‰ˆæœ¬</th>
                            <th>ç”¨é€”</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>MCP æ¡†æ¶</td>
                            <td>FastMCP</td>
                            <td>1.9.2+</td>
                            <td>MCP æœåŠ¡å™¨åŸºç¡€æ¡†æ¶</td>
                        </tr>
                        <tr>
                            <td>æ•°æ®å¤„ç†</td>
                            <td>Pandas</td>
                            <td>2.2.3+</td>
                            <td>æ•°æ®åˆ†æå’Œå¤„ç†</td>
                        </tr>
                        <tr>
                            <td>å¯è§†åŒ–</td>
                            <td>Plotly</td>
                            <td>6.1.2+</td>
                            <td>å›¾è¡¨ç”Ÿæˆ</td>
                        </tr>
                        <tr>
                            <td>æ•°æ®æ¨¡å‹</td>
                            <td>Pydantic</td>
                            <td>2.0.0+</td>
                            <td>æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–</td>
                        </tr>
                        <tr>
                            <td>æµ‹è¯•æ¡†æ¶</td>
                            <td>pytest</td>
                            <td>8.3.5+</td>
                            <td>å•å…ƒæµ‹è¯•</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section id="architecture">
                <h2>2. æ¶æ„è®¾è®¡</h2>

                <div class="architecture-diagram">
                    <h3>ğŸ—ï¸ æ•´ä½“æ¶æ„</h3>
                    <div style="margin: 20px 0;">
                        <div class="component-box">MCP Client</div>
                        <span class="arrow">â†“</span>
                        <div class="component-box">FastMCP Server</div>
                        <span class="arrow">â†“</span>
                        <div class="component-box">Tools + Resources + Prompts</div>
                    </div>
                </div>

                <h3>æ ¸å¿ƒæ¶æ„åŸåˆ™</h3>

                <h4>1. åˆ†å±‚æ¶æ„</h4>
                <pre><code>å…¥å£å±‚ (main.py)
    â†“
æœåŠ¡å™¨å±‚ (server.py) - MCP åè®®å¤„ç†
    â†“
ä¸šåŠ¡é€»è¾‘å±‚ (tools/, prompts/, resources/) - åŠŸèƒ½å®ç°
    â†“
æ•°æ®å±‚ (models/schemas.py) - æ•°æ®ç®¡ç†
    â†“
é…ç½®å±‚ (config/settings.py) - é…ç½®ç®¡ç†</code></pre>

                <h4>2. æ¨¡å—åŒ–è®¾è®¡</h4>
                <ul>
                    <li><strong>Tools æ¨¡å—</strong>ï¼šç‹¬ç«‹çš„åŠŸèƒ½å•å…ƒï¼Œæ¯ä¸ªå·¥å…·ä¸€ä¸ªæ–‡ä»¶</li>
                    <li><strong>Prompts æ¨¡å—</strong>ï¼šæ™ºèƒ½å¯¹è¯æ¨¡æ¿ï¼Œæ”¯æŒåŠ¨æ€å†…å®¹ç”Ÿæˆ</li>
                    <li><strong>Resources æ¨¡å—</strong>ï¼šåŠ¨æ€æ•°æ®è®¿é—®æ¥å£</li>
                    <li><strong>Models æ¨¡å—</strong>ï¼šæ•°æ®æ¨¡å‹å’Œç®¡ç†å™¨</li>
                </ul>

                <h4>3. æ•°æ®æµæ¶æ„</h4>
                <div class="file-tree">æ•°æ®åŠ è½½ â†’ è‡ªåŠ¨æ¨¡å¼è¯†åˆ« â†’ å†…å­˜å­˜å‚¨ â†’ åŠ¨æ€åˆ†æ â†’ ç»“æœè¿”å›
    â†“              â†“              â†“          â†“          â†“
load_dataset â†’ DatasetSchema â†’ DatasetManager â†’ åˆ†æå·¥å…· â†’ JSON å“åº”</div>
            </section>

            <section id="directory-structure">
                <h2>3. ç›®å½•ç»“æ„</h2>

                <div class="file-tree">quick-data-mcp/
â”œâ”€â”€ main.py                           # ğŸš€ æœåŠ¡å™¨å…¥å£ç‚¹
â”œâ”€â”€ pyproject.toml                    # ğŸ“¦ é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ data/                             # ğŸ“Š ç¤ºä¾‹æ•°æ®é›†
â”‚   â”œâ”€â”€ ecommerce_orders.json
â”‚   â”œâ”€â”€ employee_survey.csv
â”‚   â””â”€â”€ product_performance.csv
â”œâ”€â”€ src/mcp_server/                   # ğŸ’» æ ¸å¿ƒæœåŠ¡å™¨ä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ server.py                     # ğŸ”§ ä¸»æœåŠ¡å™¨é€»è¾‘å’Œ MCP è£…é¥°å™¨
â”‚   â”œâ”€â”€ config/                       # âš™ï¸ é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ settings.py
â”‚   â”œâ”€â”€ models/                       # ğŸ“‹ æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ schemas.py               # Pydantic æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ tools/                       # ğŸ› ï¸ MCP å·¥å…·å®ç°
â”‚   â”‚   â”œâ”€â”€ __init__.py              # å·¥å…·å¯¼å‡ºç®¡ç†
â”‚   â”‚   â”œâ”€â”€ pandas_tools.py          # é€šç”¨ Pandas å·¥å…·
â”‚   â”‚   â”œâ”€â”€ load_dataset_tool.py     # æ•°æ®åŠ è½½
â”‚   â”‚   â”œâ”€â”€ find_correlations_tool.py # ç›¸å…³æ€§åˆ†æ
â”‚   â”‚   â”œâ”€â”€ segment_by_column_tool.py # æ•°æ®åˆ†ç»„
â”‚   â”‚   â”œâ”€â”€ create_chart_tool.py     # å›¾è¡¨ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ validate_data_quality_tool.py # æ•°æ®è´¨é‡
â”‚   â”‚   â”œâ”€â”€ time_series_analysis_tool.py # æ—¶é—´åºåˆ—
â”‚   â”‚   â”œâ”€â”€ detect_outliers_tool.py  # å¼‚å¸¸æ£€æµ‹
â”‚   â”‚   â”œâ”€â”€ execute_custom_analytics_code_tool.py # è‡ªå®šä¹‰ä»£ç 
â”‚   â”‚   â””â”€â”€ ... (å…¶ä»–åˆ†æå·¥å…·)
â”‚   â”œâ”€â”€ resources/                   # ğŸ“ˆ MCP èµ„æºå®ç°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ data_resources.py        # æ ¸å¿ƒæ•°æ®èµ„æº
â”‚   â”‚   â”œâ”€â”€ get_dataset_schema_resource.py
â”‚   â”‚   â”œâ”€â”€ get_dataset_summary_resource.py
â”‚   â”‚   â””â”€â”€ ... (å…¶ä»–èµ„æº)
â”‚   â””â”€â”€ prompts/                     # ğŸ’¬ MCP æç¤ºå®ç°
â”‚       â”œâ”€â”€ __init__.py              # æç¤ºå¯¼å‡ºç®¡ç†
â”‚       â”œâ”€â”€ dataset_first_look_prompt.py    # æ•°æ®åˆæ¢
â”‚       â”œâ”€â”€ segmentation_workshop_prompt.py # åˆ†ç»„åˆ†æ
â”‚       â”œâ”€â”€ correlation_investigation_prompt.py # ç›¸å…³æ€§è°ƒæŸ¥
â”‚       â”œâ”€â”€ data_quality_assessment_prompt.py # è´¨é‡è¯„ä¼°
â”‚       â””â”€â”€ ... (å…¶ä»–æ™ºèƒ½æç¤º)
â””â”€â”€ tests/                           # ğŸ§ª æµ‹è¯•ä»£ç 
    â”œâ”€â”€ test_*.py                    # å„ç§æµ‹è¯•æ–‡ä»¶
    â”œâ”€â”€ tools/
    â”œâ”€â”€ resources/
    â””â”€â”€ prompts/</div>

                <div class="success-section">
                    <h3>âœ… è®¾è®¡äº®ç‚¹</h3>
                    <ul>
                        <li><strong>æ¸…æ™°åˆ†ç¦»</strong>ï¼šToolsã€Resourcesã€Prompts å®Œå…¨ç‹¬ç«‹</li>
                        <li><strong>æ˜“äºå¯¼èˆª</strong>ï¼šæ¯ä¸ªåŠŸèƒ½æ¨¡å—éƒ½æœ‰ä¸“é—¨çš„ç›®å½•</li>
                        <li><strong>æµ‹è¯•å‹å¥½</strong>ï¼šæµ‹è¯•ç»“æ„é•œåƒæºä»£ç ç»“æ„</li>
                        <li><strong>å¯æ‰©å±•æ€§</strong>ï¼šæ–°å¢åŠŸèƒ½åªéœ€æ·»åŠ å¯¹åº”æ–‡ä»¶</li>
                    </ul>
                </div>
            </section>

            <section id="implementation-patterns">
                <h2>4. å®ç°æ¨¡å¼</h2>

                <h3>4.1 MCP Server Tools å®ç°æ¨¡å¼</h3>

                <div class="info-section">
                    <h4>ğŸ”§ å·¥å…·è®¾è®¡åŸåˆ™</h4>
                    <p>æ¯ä¸ªå·¥å…·éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¼‚æ­¥å‡½æ•°ï¼Œä¸“æ³¨äºå•ä¸€èŒè´£ï¼Œé€šè¿‡ <code>@mcp.tool()</code> è£…é¥°å™¨æ³¨å†Œã€‚</p>
                </div>

                <h4>å…¸å‹å·¥å…·å®ç°æ¨¡å¼</h4>
                <pre><code># tools/example_tool.py
"""å·¥å…·åŠŸèƒ½æè¿°ã€‚"""

import pandas as pd
from typing import List, Dict, Any, Optional
from ..models.schemas import DatasetManager


async def example_analysis(dataset_name: str, parameter: str) -> dict:
    """
    å·¥å…·åŠŸèƒ½çš„è¯¦ç»†æè¿°ã€‚
    
    Args:
        dataset_name: æ•°æ®é›†åç§°
        parameter: åˆ†æå‚æ•°
        
    Returns:
        dict: åŒ…å«åˆ†æç»“æœçš„å­—å…¸
    """
    try:
        # 1. è·å–æ•°æ®é›†
        df = DatasetManager.get_dataset(dataset_name)
        
        # 2. æ‰§è¡Œåˆ†æé€»è¾‘
        result = perform_analysis(df, parameter)
        
        # 3. è¿”å›æ ‡å‡†åŒ–ç»“æœ
        return {
            "status": "success",
            "dataset_name": dataset_name,
            "analysis_type": "example_analysis",
            "results": result,
            "metadata": {
                "rows_analyzed": len(df),
                "columns_analyzed": len(df.columns)
            }
        }
    except Exception as e:
        return {
            "status": "error", 
            "message": f"Analysis failed: {str(e)}"
        }</code></pre>

                <h4>å·¥å…·æ³¨å†Œæ¨¡å¼</h4>
                <pre><code># server.py
from .tools import example_analysis

@mcp.tool()
async def example_analysis_tool(dataset_name: str, parameter: str) -> dict:
    """åœ¨æœåŠ¡å™¨ä¸­æ³¨å†Œå·¥å…·çš„åŒ…è£…å‡½æ•°ã€‚"""
    return await example_analysis(dataset_name, parameter)</code></pre>

                <h3>4.2 MCP Server Prompts å®ç°æ¨¡å¼</h3>

                <div class="info-section">
                    <h4>ğŸ’¬ æç¤ºè®¾è®¡åŸåˆ™</h4>
                    <p>æç¤ºæ˜¯æ™ºèƒ½å¯¹è¯æ¨¡æ¿ï¼Œæ ¹æ®å½“å‰æ•°æ®çŠ¶æ€åŠ¨æ€ç”Ÿæˆä¸ªæ€§åŒ–çš„åˆ†æå»ºè®®å’ŒæŒ‡å¯¼ã€‚</p>
                </div>

                <h4>å…¸å‹æç¤ºå®ç°æ¨¡å¼</h4>
                <pre><code># prompts/example_prompt.py
"""æ™ºèƒ½æç¤ºåŠŸèƒ½æè¿°ã€‚"""

from ..models.schemas import DatasetManager, dataset_schemas


async def example_workshop(dataset_name: str, context: str = "general") -> str:
    """
    ç”Ÿæˆé’ˆå¯¹ç‰¹å®šåˆ†æåœºæ™¯çš„æ™ºèƒ½æç¤ºã€‚
    
    Args:
        dataset_name: æ•°æ®é›†åç§°
        context: ä¸šåŠ¡ä¸Šä¸‹æ–‡
        
    Returns:
        str: æ ¼å¼åŒ–çš„æç¤ºå†…å®¹
    """
    try:
        # 1. éªŒè¯æ•°æ®é›†å­˜åœ¨
        if dataset_name not in dataset_schemas:
            return f"æ•°æ®é›† '{dataset_name}' æœªåŠ è½½ã€‚è¯·å…ˆä½¿ç”¨ load_dataset() å·¥å…·ã€‚"
        
        # 2. è·å–æ•°æ®é›†å…ƒä¿¡æ¯
        schema = dataset_schemas[dataset_name]
        
        # 3. åˆ†ææ•°æ®ç‰¹å¾
        numerical_cols = [name for name, info in schema.columns.items() 
                         if info.suggested_role == 'numerical']
        categorical_cols = [name for name, info in schema.columns.items() 
                           if info.suggested_role == 'categorical']
        
        # 4. ç”ŸæˆåŠ¨æ€æç¤ºå†…å®¹
        prompt = f"""ğŸ” **{dataset_name}** æ•°æ®åˆ†æå·¥ä½œåŠ
        
æ‚¨çš„æ•°æ®é›†åŒ…å« **{schema.row_count:,}** æ¡è®°å½•å’Œ **{len(schema.columns)}** ä¸ªå­—æ®µã€‚

**ğŸ“Š å¯ç”¨çš„æ•°å€¼å­—æ®µ** ({len(numerical_cols)}ä¸ª):
{', '.join(numerical_cols) if numerical_cols else 'æ— '}

**ğŸ·ï¸ å¯ç”¨çš„åˆ†ç±»å­—æ®µ** ({len(categorical_cols)}ä¸ª):
{', '.join(categorical_cols) if categorical_cols else 'æ— '}

**ğŸ¯ å»ºè®®çš„åˆ†ææ­¥éª¤:**
"""
        
        # 5. åŸºäºæ•°æ®ç‰¹å¾æä¾›ä¸ªæ€§åŒ–å»ºè®®
        if numerical_cols and categorical_cols:
            prompt += f"""
â€¢ **åˆ†ç»„å¯¹æ¯”åˆ†æ**: ä½¿ç”¨ `segment_by_column('{dataset_name}', '{categorical_cols[0]}')`
â€¢ **æ•°å€¼å…³ç³»æ¢ç´¢**: ä½¿ç”¨ `find_correlations('{dataset_name}')`
"""
        
        prompt += f"""
**ğŸš€ å¿«é€Ÿå¼€å§‹å‘½ä»¤:**
â€¢ æ•°æ®æ¦‚è§ˆ: `resource_datasets_summary('{dataset_name}')`
â€¢ æ•°æ®è´¨é‡æ£€æŸ¥: `validate_data_quality('{dataset_name}')`

æ‚¨å¸Œæœ›ä»å“ªä¸ªè§’åº¦å¼€å§‹åˆ†ææ‚¨çš„æ•°æ®ï¼Ÿ"""
        
        return prompt
        
    except Exception as e:
        return f"ç”Ÿæˆæç¤ºæ—¶å‡ºé”™: {str(e)}"</code></pre>

                <h4>æç¤ºæ³¨å†Œæ¨¡å¼</h4>
                <pre><code># server.py
from .prompts import example_workshop

@mcp.prompt()
async def example_workshop_prompt(dataset_name: str, context: str = "general") -> str:
    """åœ¨æœåŠ¡å™¨ä¸­æ³¨å†Œæç¤ºçš„åŒ…è£…å‡½æ•°ã€‚"""
    return await example_workshop(dataset_name, context)</code></pre>

                <h3>4.3 MCP Server Resources å®ç°æ¨¡å¼</h3>

                <div class="info-section">
                    <h4>ğŸ“ˆ èµ„æºè®¾è®¡åŸåˆ™</h4>
                    <p>èµ„æºæä¾›åŠ¨æ€æ•°æ®è®¿é—®ï¼Œæ ¹æ®å½“å‰çŠ¶æ€è¿”å›å®æ—¶ä¿¡æ¯ï¼Œæ”¯æŒ URI æ¨¡å¼çš„å‚æ•°åŒ–è®¿é—®ã€‚</p>
                </div>

                <h4>å…¸å‹èµ„æºå®ç°æ¨¡å¼</h4>
                <pre><code># resources/example_resource.py
"""åŠ¨æ€èµ„æºåŠŸèƒ½æè¿°ã€‚"""

from ..models.schemas import DatasetManager, dataset_schemas


async def get_dynamic_info(dataset_name: str = None) -> dict:
    """
    è·å–åŠ¨æ€æ•°æ®ä¿¡æ¯ã€‚
    
    Args:
        dataset_name: å¯é€‰çš„æ•°æ®é›†åç§°
        
    Returns:
        dict: å®æ—¶æ•°æ®ä¿¡æ¯
    """
    try:
        if dataset_name and dataset_name in dataset_schemas:
            # è¿”å›ç‰¹å®šæ•°æ®é›†ä¿¡æ¯
            schema = dataset_schemas[dataset_name]
            return {
                "dataset_name": dataset_name,
                "rows": schema.row_count,
                "columns": len(schema.columns),
                "available_analyses": schema.suggested_analyses
            }
        else:
            # è¿”å›æ€»ä½“çŠ¶æ€ä¿¡æ¯
            datasets = DatasetManager.list_datasets()
            return {
                "loaded_datasets": len(datasets),
                "dataset_names": datasets,
                "status": "active" if datasets else "no_data"
            }
    except Exception as e:
        return {"error": f"è·å–èµ„æºå¤±è´¥: {str(e)}"}</code></pre>

                <h4>èµ„æºæ³¨å†Œæ¨¡å¼</h4>
                <pre><code># server.py
from .resources import get_dynamic_info

@mcp.resource("analytics://dynamic_info")
async def get_dynamic_info_resource() -> dict:
    """æ³¨å†Œå…¨å±€åŠ¨æ€ä¿¡æ¯èµ„æºã€‚"""
    return await get_dynamic_info()

@mcp.resource("datasets://{dataset_name}/info")
async def get_dataset_info_resource(dataset_name: str) -> dict:
    """æ³¨å†Œå‚æ•°åŒ–æ•°æ®é›†ä¿¡æ¯èµ„æºã€‚"""
    return await get_dynamic_info(dataset_name)</code></pre>
            </section>

            <section id="adding-tools">
                <h2>5. æ·»åŠ æ–°çš„ MCP Server Tool</h2>

                <div class="warning-section">
                    <h3>âš ï¸ å¼€å‘å‰å‡†å¤‡</h3>
                    <p>åœ¨æ·»åŠ æ–°å·¥å…·å‰ï¼Œè¯·ç¡®ä¿ç†è§£ç°æœ‰å·¥å…·çš„å®ç°æ¨¡å¼ï¼Œå¹¶éµå¾ªé¡¹ç›®çš„ç¼–ç è§„èŒƒã€‚</p>
                </div>

                <h3>æ­¥éª¤è¯¦è§£</h3>

                <h4><span class="step-number">1</span>åˆ›å»ºå·¥å…·å®ç°æ–‡ä»¶</h4>
                <p><strong>ä½ç½®:</strong> <code>src/mcp_server/tools/your_new_tool.py</code></p>
                <pre><code># src/mcp_server/tools/advanced_clustering_tool.py
"""é«˜çº§èšç±»åˆ†æå·¥å…·ã€‚"""

import pandas as pd
import numpy as np
from sklearn.cluster import KMeans
from sklearn.preprocessing import StandardScaler
from typing import List, Dict, Any, Optional
from ..models.schemas import DatasetManager


async def advanced_clustering(
    dataset_name: str, 
    feature_columns: List[str],
    n_clusters: int = 3,
    algorithm: str = "kmeans"
) -> dict:
    """
    å¯¹æ•°æ®é›†æ‰§è¡Œé«˜çº§èšç±»åˆ†æã€‚
    
    Args:
        dataset_name: ç›®æ ‡æ•°æ®é›†åç§°
        feature_columns: ç”¨äºèšç±»çš„ç‰¹å¾åˆ—
        n_clusters: èšç±»æ•°é‡ï¼ˆé»˜è®¤3ï¼‰
        algorithm: èšç±»ç®—æ³•ï¼ˆkmeans, dbscanç­‰ï¼‰
        
    Returns:
        dict: èšç±»åˆ†æç»“æœ
    """
    try:
        # è·å–æ•°æ®é›†
        df = DatasetManager.get_dataset(dataset_name)
        
        # éªŒè¯ç‰¹å¾åˆ—å­˜åœ¨
        missing_cols = [col for col in feature_columns if col not in df.columns]
        if missing_cols:
            return {
                "status": "error",
                "message": f"ç‰¹å¾åˆ—ä¸å­˜åœ¨: {missing_cols}"
            }
        
        # å‡†å¤‡èšç±»æ•°æ®
        features = df[feature_columns].copy()
        
        # å¤„ç†ç¼ºå¤±å€¼
        features = features.fillna(features.mean())
        
        # æ ‡å‡†åŒ–ç‰¹å¾
        scaler = StandardScaler()
        features_scaled = scaler.fit_transform(features)
        
        # æ‰§è¡Œèšç±»
        if algorithm == "kmeans":
            clusterer = KMeans(n_clusters=n_clusters, random_state=42)
            cluster_labels = clusterer.fit_predict(features_scaled)
            
            # è®¡ç®—èšç±»ä¸­å¿ƒ
            cluster_centers = scaler.inverse_transform(clusterer.cluster_centers_)
        else:
            return {
                "status": "error",
                "message": f"ä¸æ”¯æŒçš„èšç±»ç®—æ³•: {algorithm}"
            }
        
        # æ·»åŠ èšç±»æ ‡ç­¾åˆ°åŸæ•°æ®
        df_with_clusters = df.copy()
        df_with_clusters['cluster_label'] = cluster_labels
        
        # è®¡ç®—èšç±»ç»Ÿè®¡ä¿¡æ¯
        cluster_stats = []
        for i in range(n_clusters):
            cluster_data = df_with_clusters[df_with_clusters['cluster_label'] == i]
            cluster_stats.append({
                "cluster_id": i,
                "size": len(cluster_data),
                "percentage": len(cluster_data) / len(df) * 100,
                "center": dict(zip(feature_columns, cluster_centers[i]))
            })
        
        return {
            "status": "success",
            "dataset_name": dataset_name,
            "analysis_type": "advanced_clustering",
            "results": {
                "algorithm": algorithm,
                "n_clusters": n_clusters,
                "feature_columns": feature_columns,
                "cluster_stats": cluster_stats,
                "silhouette_score": calculate_silhouette_score(features_scaled, cluster_labels)
            },
            "metadata": {
                "total_points": len(df),
                "features_used": len(feature_columns),
                "algorithm_params": {"n_clusters": n_clusters}
            }
        }
        
    except Exception as e:
        return {
            "status": "error",
            "message": f"èšç±»åˆ†æå¤±è´¥: {str(e)}"
        }


def calculate_silhouette_score(features, labels):
    """è®¡ç®—è½®å»“ç³»æ•°è¯„ä¼°èšç±»è´¨é‡ã€‚"""
    try:
        from sklearn.metrics import silhouette_score
        return float(silhouette_score(features, labels))
    except:
        return None</code></pre>

                <h4><span class="step-number">2</span>æ›´æ–°å·¥å…·åŒ…å¯¼å‡º</h4>
                <p><strong>æ–‡ä»¶:</strong> <code>src/mcp_server/tools/__init__.py</code></p>
                <pre><code># åœ¨å¯¼å…¥åŒºåŸŸæ·»åŠ 
from .advanced_clustering_tool import advanced_clustering

# åœ¨ __all__ åˆ—è¡¨ä¸­æ·»åŠ 
__all__ = [
    # ... ç°æœ‰å·¥å…·
    "advanced_clustering"  # æ·»åŠ æ–°å·¥å…·
]</code></pre>

                <h4><span class="step-number">3</span>åœ¨æœåŠ¡å™¨ä¸­æ³¨å†Œå·¥å…·</h4>
                <p><strong>æ–‡ä»¶:</strong> <code>src/mcp_server/server.py</code></p>
                <pre><code># åœ¨å¯¼å…¥åŒºåŸŸæ·»åŠ 
from .tools import advanced_clustering

# åœ¨å·¥å…·æ³¨å†ŒåŒºåŸŸæ·»åŠ 
@mcp.tool()
async def advanced_clustering_analysis(
    dataset_name: str, 
    feature_columns: List[str],
    n_clusters: int = 3,
    algorithm: str = "kmeans"
) -> dict:
    """æ‰§è¡Œé«˜çº§èšç±»åˆ†æï¼Œå‘ç°æ•°æ®ä¸­çš„è‡ªç„¶åˆ†ç»„æ¨¡å¼ã€‚"""
    return await advanced_clustering(dataset_name, feature_columns, n_clusters, algorithm)</code></pre>

                <h4><span class="step-number">4</span>åˆ›å»ºå•å…ƒæµ‹è¯•</h4>
                <p><strong>ä½ç½®:</strong> <code>tests/tools/test_advanced_clustering_tool.py</code></p>
                <pre><code># tests/tools/test_advanced_clustering_tool.py
"""é«˜çº§èšç±»å·¥å…·æµ‹è¯•ã€‚"""

import pytest
import pandas as pd
from src.mcp_server.tools.advanced_clustering_tool import advanced_clustering
from src.mcp_server.models.schemas import DatasetManager


@pytest.fixture
def sample_clustering_data():
    """åˆ›å»ºç¤ºä¾‹èšç±»æ•°æ®ã€‚"""
    data = {
        "feature1": [1, 2, 1, 2, 10, 11, 10, 11],
        "feature2": [1, 1, 2, 2, 10, 10, 11, 11],
        "other_col": ["a", "b", "c", "d", "e", "f", "g", "h"]
    }
    df = pd.DataFrame(data)
    DatasetManager.loaded_datasets["test_clustering"] = df
    return df


@pytest.mark.asyncio
async def test_successful_clustering(sample_clustering_data):
    """æµ‹è¯•æˆåŠŸçš„èšç±»åˆ†æã€‚"""
    result = await advanced_clustering(
        dataset_name="test_clustering",
        feature_columns=["feature1", "feature2"],
        n_clusters=2
    )
    
    assert result["status"] == "success"
    assert result["results"]["n_clusters"] == 2
    assert len(result["results"]["cluster_stats"]) == 2


@pytest.mark.asyncio
async def test_missing_dataset():
    """æµ‹è¯•æ•°æ®é›†ä¸å­˜åœ¨çš„æƒ…å†µã€‚"""
    result = await advanced_clustering(
        dataset_name="nonexistent",
        feature_columns=["feature1"],
        n_clusters=2
    )
    
    assert result["status"] == "error"
    assert "not loaded" in result["message"].lower()


@pytest.mark.asyncio  
async def test_invalid_features(sample_clustering_data):
    """æµ‹è¯•æ— æ•ˆç‰¹å¾åˆ—ã€‚"""
    result = await advanced_clustering(
        dataset_name="test_clustering",
        feature_columns=["nonexistent_column"],
        n_clusters=2
    )
    
    assert result["status"] == "error"
    assert "ä¸å­˜åœ¨" in result["message"]</code></pre>

                <h4><span class="step-number">5</span>éªŒè¯å’Œæµ‹è¯•</h4>
                <pre><code># è¿è¡Œç‰¹å®šæµ‹è¯•
uv run pytest tests/tools/test_advanced_clustering_tool.py -v

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
uv run pytest tests/ -v

# å¯åŠ¨æœåŠ¡å™¨æµ‹è¯•
uv run python main.py</code></pre>

                <div class="success-section">
                    <h3>âœ… å·¥å…·æ·»åŠ å®Œæˆ</h3>
                    <p>ç°åœ¨æ‚¨çš„æ–°å·¥å…·å·²ç»å®Œå…¨é›†æˆåˆ° MCP æœåŠ¡å™¨ä¸­ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ <code>advanced_clustering_analysis</code> è°ƒç”¨å®ƒã€‚</p>
                </div>
            </section>

            <section id="adding-prompts">
                <h2>6. æ·»åŠ æ–°çš„ MCP Server Prompt</h2>

                <h3>æ­¥éª¤è¯¦è§£</h3>

                <h4><span class="step-number">1</span>åˆ›å»ºæç¤ºå®ç°æ–‡ä»¶</h4>
                <p><strong>ä½ç½®:</strong> <code>src/mcp_server/prompts/clustering_strategy_prompt.py</code></p>
                <pre><code># src/mcp_server/prompts/clustering_strategy_prompt.py
"""èšç±»ç­–ç•¥è§„åˆ’æç¤ºã€‚"""

from ..models.schemas import DatasetManager, dataset_schemas
from typing import Optional


async def clustering_strategy_workshop(dataset_name: str, business_goal: str = "customer_segmentation") -> str:
    """
    åŸºäºæ•°æ®ç‰¹å¾ç”Ÿæˆèšç±»åˆ†æç­–ç•¥æç¤ºã€‚
    
    Args:
        dataset_name: ç›®æ ‡æ•°æ®é›†åç§°
        business_goal: ä¸šåŠ¡ç›®æ ‡ï¼ˆcustomer_segmentation, product_grouping, etc.ï¼‰
        
    Returns:
        str: ä¸ªæ€§åŒ–çš„èšç±»ç­–ç•¥æŒ‡å¯¼
    """
    try:
        # éªŒè¯æ•°æ®é›†å­˜åœ¨
        if dataset_name not in dataset_schemas:
            return f"""âŒ **æ•°æ®é›† '{dataset_name}' æœªåŠ è½½**

è¯·å…ˆä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åŠ è½½æ•°æ®é›†:
```
load_dataset('path/to/your/data.csv', '{dataset_name}')
```

ç„¶åé‡æ–°è°ƒç”¨æ­¤æç¤ºã€‚"""
        
        schema = dataset_schemas[dataset_name]
        
        # åˆ†ææ•°æ®ç‰¹å¾
        numerical_cols = [name for name, info in schema.columns.items() 
                         if info.suggested_role == 'numerical']
        categorical_cols = [name for name, info in schema.columns.items() 
                           if info.suggested_role == 'categorical']
        temporal_cols = [name for name, info in schema.columns.items() 
                        if info.suggested_role == 'temporal']
        
        # ç”ŸæˆåŠ¨æ€ç­–ç•¥å»ºè®®
        prompt = f"""ğŸ¯ **{dataset_name} èšç±»åˆ†æç­–ç•¥å·¥ä½œåŠ**

æ‚¨çš„æ•°æ®é›†åŒ…å« **{schema.row_count:,}** æ¡è®°å½•ï¼Œæˆ‘ä»¬æ¥åˆ¶å®šæœ€ä¼˜çš„èšç±»ç­–ç•¥ï¼

## ğŸ“Š æ•°æ®ç‰¹å¾åˆ†æ

**æ•°å€¼å‹ç‰¹å¾** ({len(numerical_cols)}ä¸ª):
{', '.join(numerical_cols) if numerical_cols else 'âš ï¸ æ— æ•°å€¼å‹ç‰¹å¾'}

**åˆ†ç±»å‹ç‰¹å¾** ({len(categorical_cols)}ä¸ª):
{', '.join(categorical_cols) if categorical_cols else 'âš ï¸ æ— åˆ†ç±»å‹ç‰¹å¾'}

**æ—¶é—´å‹ç‰¹å¾** ({len(temporal_cols)}ä¸ª):
{', '.join(temporal_cols) if temporal_cols else 'âš ï¸ æ— æ—¶é—´å‹ç‰¹å¾'}

## ğŸ¯ ä¸šåŠ¡ç›®æ ‡: {business_goal.replace('_', ' ').title()}

"""
        
        # åŸºäºä¸šåŠ¡ç›®æ ‡å’Œæ•°æ®ç‰¹å¾æä¾›ç­–ç•¥å»ºè®®
        if business_goal == "customer_segmentation":
            prompt += """## ğŸ“ˆ å®¢æˆ·ç»†åˆ†ç­–ç•¥å»ºè®®

**ç¬¬ä¸€é˜¶æ®µ: ç‰¹å¾å·¥ç¨‹**
"""
            if numerical_cols:
                prompt += f"""â€¢ ä½¿ç”¨æ•°å€¼ç‰¹å¾è¿›è¡ŒRFMåˆ†æ: {numerical_cols[:3]}
â€¢ å»ºè®®èšç±»æ•°é‡: 3-5ä¸ªå®¢æˆ·ç¾¤ä½“
â€¢ å…³é”®å‘½ä»¤: `advanced_clustering_analysis('{dataset_name}', {numerical_cols[:3]}, n_clusters=4)`
"""
            
            if categorical_cols:
                prompt += f"""â€¢ è€ƒè™‘åˆ†ç±»ç‰¹å¾çš„å½±å“: {categorical_cols[:2]}
â€¢ å¯ä»¥å…ˆæŒ‰ {categorical_cols[0]} åˆ†ç»„å†èšç±»
"""
                
        elif business_goal == "product_grouping":
            prompt += """## ğŸ›ï¸ äº§å“åˆ†ç»„ç­–ç•¥å»ºè®®

**ç¬¬ä¸€é˜¶æ®µ: äº§å“ç‰¹å¾èšç±»**
"""
            if numerical_cols:
                product_features = [col for col in numerical_cols if any(keyword in col.lower() 
                                  for keyword in ['price', 'cost', 'rating', 'sales', 'revenue'])]
                if product_features:
                    prompt += f"""â€¢ ä½¿ç”¨äº§å“ç›¸å…³ç‰¹å¾: {product_features}
â€¢ å»ºè®®èšç±»æ•°é‡: 3-6ä¸ªäº§å“ç±»åˆ«
â€¢ å…³é”®å‘½ä»¤: `advanced_clustering_analysis('{dataset_name}', {product_features}, n_clusters=5)`
"""
        
        # é€šç”¨èšç±»å»ºè®®
        prompt += f"""
## ğŸš€ æ‰§è¡Œæ­¥éª¤

**æ­¥éª¤1: æ•°æ®é¢„å¤„ç†**
```
# æ£€æŸ¥æ•°æ®è´¨é‡
validate_data_quality('{dataset_name}')

# æŸ¥çœ‹ç‰¹å¾åˆ†å¸ƒ
analyze_distributions('{dataset_name}', '{numerical_cols[0] if numerical_cols else 'column_name'}')
```

**æ­¥éª¤2: ç‰¹å¾é€‰æ‹©**
"""
        
        if len(numerical_cols) >= 2:
            prompt += f"""```
# åˆ†æç‰¹å¾ç›¸å…³æ€§
find_correlations('{dataset_name}', {numerical_cols[:4]})
```
"""
        
        prompt += f"""
**æ­¥éª¤3: èšç±»æ‰§è¡Œ**
```
# æ‰§è¡Œèšç±»åˆ†æ
advanced_clustering_analysis(
    dataset_name='{dataset_name}',
    feature_columns={numerical_cols[:3] if len(numerical_cols) >= 3 else numerical_cols},
    n_clusters=4,
    algorithm='kmeans'
)
```

**æ­¥éª¤4: ç»“æœéªŒè¯**
```
# æŒ‰èšç±»ç»“æœåˆ†ç»„åˆ†æ
segment_by_column('{dataset_name}', 'cluster_label')

# ç”Ÿæˆèšç±»å¯è§†åŒ–
create_chart('{dataset_name}', 'scatter', '{numerical_cols[0] if numerical_cols else 'x_col'}', 
             '{numerical_cols[1] if len(numerical_cols) > 1 else 'y_col'}', 
             groupby_column='cluster_label')
```

## ğŸ’¡ é«˜çº§æŠ€å·§

"""
        
        if len(numerical_cols) > 5:
            prompt += """â€¢ **ç»´åº¦è¿‡å¤š**: è€ƒè™‘ä½¿ç”¨PCAé™ç»´æˆ–ç‰¹å¾é€‰æ‹©
â€¢ **ç‰¹å¾é‡è¦æ€§**: ä½¿ç”¨ `calculate_feature_importance()` é€‰æ‹©å…³é”®ç‰¹å¾
"""
        
        if temporal_cols:
            prompt += f"""â€¢ **æ—¶é—´ç»´åº¦**: è€ƒè™‘åŸºäº {temporal_cols[0]} çš„æ—¶é—´çª—å£èšç±»
â€¢ **è¶‹åŠ¿èšç±»**: åˆ†ææ—¶é—´åºåˆ—æ¨¡å¼çš„ç›¸ä¼¼æ€§
"""
        
        prompt += f"""
## ğŸ¯ é¢„æœŸè¾“å‡º

æˆåŠŸçš„èšç±»åˆ†æå°†ä¸ºæ‚¨æä¾›:
- ğŸ“Š æ¯ä¸ªèšç±»çš„ç»Ÿè®¡ç‰¹å¾
- ğŸ“ˆ èšç±»è´¨é‡è¯„ä¼°ï¼ˆè½®å»“ç³»æ•°ï¼‰
- ğŸ·ï¸ èšç±»æ ‡ç­¾æ·»åŠ åˆ°åŸæ•°æ®
- ğŸ“‹ ä¸šåŠ¡å¯è§£é‡Šçš„èšç±»æè¿°

**å‡†å¤‡å¥½å¼€å§‹äº†å—ï¼Ÿ** é€‰æ‹©ä¸Šè¿°ä»»ä¸€å‘½ä»¤å¼€å§‹æ‚¨çš„èšç±»åˆ†æä¹‹æ—…ï¼
"""
        
        return prompt
        
    except Exception as e:
        return f"ç”Ÿæˆèšç±»ç­–ç•¥æç¤ºæ—¶å‡ºé”™: {str(e)}"</code></pre>

                <h4><span class="step-number">2</span>æ›´æ–°æç¤ºåŒ…å¯¼å‡º</h4>
                <p><strong>æ–‡ä»¶:</strong> <code>src/mcp_server/prompts/__init__.py</code></p>
                <pre><code># æ·»åŠ å¯¼å…¥
from .clustering_strategy_prompt import clustering_strategy_workshop

# æ›´æ–° __all__ åˆ—è¡¨
__all__ = [
    # ... ç°æœ‰æç¤º
    "clustering_strategy_workshop"  # æ·»åŠ æ–°æç¤º
]</code></pre>

                <h4><span class="step-number">3</span>åœ¨æœåŠ¡å™¨ä¸­æ³¨å†Œæç¤º</h4>
                <p><strong>æ–‡ä»¶:</strong> <code>src/mcp_server/server.py</code></p>
                <pre><code># åœ¨å¯¼å…¥åŒºåŸŸæ·»åŠ 
from .prompts import clustering_strategy_workshop

# åœ¨æç¤ºæ³¨å†ŒåŒºåŸŸæ·»åŠ 
@mcp.prompt()
async def clustering_strategy_prompt(dataset_name: str, business_goal: str = "customer_segmentation") -> str:
    """ç”ŸæˆåŸºäºæ•°æ®ç‰¹å¾çš„èšç±»åˆ†æç­–ç•¥å’Œæ‰§è¡ŒæŒ‡å¯¼ã€‚"""
    return await clustering_strategy_workshop(dataset_name, business_goal)</code></pre>

                <h4><span class="step-number">4</span>åˆ›å»ºæç¤ºæµ‹è¯•</h4>
                <p><strong>ä½ç½®:</strong> <code>tests/prompts/test_clustering_strategy_prompt.py</code></p>
                <pre><code># tests/prompts/test_clustering_strategy_prompt.py
"""èšç±»ç­–ç•¥æç¤ºæµ‹è¯•ã€‚"""

import pytest
import pandas as pd
from src.mcp_server.prompts.clustering_strategy_prompt import clustering_strategy_workshop
from src.mcp_server.models.schemas import DatasetManager, DatasetSchema, dataset_schemas


@pytest.fixture
def sample_customer_data():
    """åˆ›å»ºç¤ºä¾‹å®¢æˆ·æ•°æ®ã€‚"""
    data = {
        "customer_id": range(1, 101),
        "age": np.random.randint(18, 80, 100),
        "income": np.random.randint(30000, 150000, 100),
        "spending": np.random.randint(1000, 50000, 100),
        "category": np.random.choice(["A", "B", "C"], 100),
        "signup_date": pd.date_range("2023-01-01", periods=100, freq="D")
    }
    df = pd.DataFrame(data)
    
    # åˆ›å»ºæ•°æ®é›†å’Œæ¨¡å¼
    schema = DatasetSchema.from_dataframe(df, "customer_test")
    dataset_schemas["customer_test"] = schema
    DatasetManager.loaded_datasets["customer_test"] = df
    
    return df


@pytest.mark.asyncio
async def test_clustering_strategy_generation(sample_customer_data):
    """æµ‹è¯•èšç±»ç­–ç•¥ç”Ÿæˆã€‚"""
    result = await clustering_strategy_workshop("customer_test", "customer_segmentation")
    
    assert "customer_test" in result
    assert "èšç±»åˆ†æç­–ç•¥" in result
    assert "advanced_clustering_analysis" in result
    assert "æ•°å€¼å‹ç‰¹å¾" in result


@pytest.mark.asyncio
async def test_missing_dataset():
    """æµ‹è¯•æ•°æ®é›†ä¸å­˜åœ¨çš„æƒ…å†µã€‚"""
    result = await clustering_strategy_workshop("nonexistent", "customer_segmentation")
    
    assert "æœªåŠ è½½" in result
    assert "load_dataset" in result


@pytest.mark.asyncio
async def test_different_business_goals(sample_customer_data):
    """æµ‹è¯•ä¸åŒä¸šåŠ¡ç›®æ ‡çš„ç­–ç•¥ã€‚"""
    # å®¢æˆ·ç»†åˆ†
    customer_result = await clustering_strategy_workshop("customer_test", "customer_segmentation")
    assert "å®¢æˆ·ç»†åˆ†ç­–ç•¥" in customer_result
    
    # äº§å“åˆ†ç»„
    product_result = await clustering_strategy_workshop("customer_test", "product_grouping")
    assert "äº§å“åˆ†ç»„ç­–ç•¥" in product_result</code></pre>

                <div class="success-section">
                    <h3>âœ… æç¤ºæ·»åŠ å®Œæˆ</h3>
                    <p>æ‚¨çš„æ–°æç¤ºç°åœ¨å¯ä»¥é€šè¿‡ <code>clustering_strategy_prompt</code> åœ¨ MCP å®¢æˆ·ç«¯ä¸­ä½¿ç”¨äº†ï¼</p>
                </div>
            </section>

            <section id="extensibility">
                <h2>7. å¯æ‰©å±•æ€§è®¾è®¡</h2>

                <div class="info-section">
                    <h3>â„¹ï¸ è®¾è®¡å“²å­¦</h3>
                    <p>quick-data-mcp çš„å¯æ‰©å±•æ€§è®¾è®¡åŸºäº"å¼€æ”¾-å°é—­åŸåˆ™"ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ã€‚</p>
                </div>

                <h3>7.1 æ¨¡å—åŒ–æ¶æ„çš„å¯æ‰©å±•æ€§</h3>

                <h4>ğŸ“¦ åŒ…çº§åˆ«çš„æ‰©å±•</h4>
                <table>
                    <thead>
                        <tr>
                            <th>ç»„ä»¶ç±»å‹</th>
                            <th>æ‰©å±•æ–¹å¼</th>
                            <th>æ³¨å†Œæœºåˆ¶</th>
                            <th>è‡ªåŠ¨å‘ç°</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Tools</td>
                            <td>æ·»åŠ æ–°æ–‡ä»¶åˆ° tools/</td>
                            <td>__init__.py å¯¼å‡º + server.py æ³¨å†Œ</td>
                            <td>âŒ æ‰‹åŠ¨</td>
                        </tr>
                        <tr>
                            <td>Prompts</td>
                            <td>æ·»åŠ æ–°æ–‡ä»¶åˆ° prompts/</td>
                            <td>__init__.py å¯¼å‡º + server.py æ³¨å†Œ</td>
                            <td>âŒ æ‰‹åŠ¨</td>
                        </tr>
                        <tr>
                            <td>Resources</td>
                            <td>æ·»åŠ æ–°å‡½æ•°åˆ° resources/</td>
                            <td>ç›´æ¥åœ¨ server.py æ³¨å†Œ</td>
                            <td>âŒ æ‰‹åŠ¨</td>
                        </tr>
                        <tr>
                            <td>Models</td>
                            <td>æ‰©å±• schemas.py</td>
                            <td>è‡ªåŠ¨é€šè¿‡å¯¼å…¥</td>
                            <td>âœ… è‡ªåŠ¨</td>
                        </tr>
                    </tbody>
                </table>

                <h4>ğŸ”§ å·¥å…·æ‰©å±•æ¨¡å¼</h4>
                <pre><code># æ–°å¢å·¥å…·çš„æ ‡å‡†æµç¨‹
1. åˆ›å»ºå·¥å…·æ–‡ä»¶: tools/new_tool.py
   â””â”€â”€ å®ç°å¼‚æ­¥å‡½æ•°: async def new_analysis()

2. æ³¨å†Œåˆ°åŒ…: tools/__init__.py  
   â””â”€â”€ æ·»åŠ å¯¼å…¥å’Œ __all__ å¯¼å‡º

3. æ³¨å†Œåˆ°æœåŠ¡å™¨: server.py
   â””â”€â”€ æ·»åŠ  @mcp.tool() è£…é¥°å™¨åŒ…è£…

4. æ·»åŠ æµ‹è¯•: tests/tools/test_new_tool.py
   â””â”€â”€ éªŒè¯åŠŸèƒ½æ­£ç¡®æ€§</code></pre>

                <h3>7.2 æ•°æ®é©±åŠ¨çš„å¯æ‰©å±•æ€§</h3>

                <h4>ğŸ§  æ™ºèƒ½æ¨¡å¼è¯†åˆ«</h4>
                <p><code>DatasetSchema.from_dataframe()</code> æ–¹æ³•è‡ªåŠ¨åˆ†ææ•°æ®ç‰¹å¾ï¼š</p>
                <pre><code># è‡ªåŠ¨è¯†åˆ«åˆ—ç±»å‹å’Œå»ºè®®åˆ†æ
@classmethod
def from_dataframe(cls, df: pd.DataFrame, name: str) -> 'DatasetSchema':
    columns = {}
    for col in df.columns:
        # è‡ªåŠ¨åˆ†ç±»ï¼šnumerical, categorical, temporal, identifier
        columns[col] = ColumnInfo.from_series(df[col], col)
    
    # åŸºäºåˆ—ç±»å‹è‡ªåŠ¨ç”Ÿæˆåˆ†æå»ºè®®
    suggestions = []
    if len(numerical_cols) >= 2:
        suggestions.append("correlation_analysis")
    if categorical_cols:
        suggestions.append("segmentation_analysis")
    # ... æ›´å¤šæ™ºèƒ½å»ºè®®</code></pre>

                <h4>ğŸ“ˆ åŠ¨æ€èµ„æºç”Ÿæˆ</h4>
                <p>èµ„æºç³»ç»Ÿæ”¯æŒå‚æ•°åŒ– URIï¼Œå®ç°åŠ¨æ€æ•°æ®è®¿é—®ï¼š</p>
                <pre><code># æ”¯æŒä»»æ„æ•°æ®é›†çš„åŠ¨æ€èµ„æº
@mcp.resource("datasets://{dataset_name}/schema")
async def get_dataset_schema(dataset_name: str) -> dict:
    # åŠ¨æ€è¿”å›æŒ‡å®šæ•°æ®é›†çš„æ¨¡å¼ä¿¡æ¯
    return await data_resources.get_dataset_schema(dataset_name)

# æ–°æ•°æ®é›†åŠ è½½åè‡ªåŠ¨å¯ç”¨ï¼Œæ— éœ€é¢å¤–é…ç½®</code></pre>

                <h3>7.3 é…ç½®é©±åŠ¨çš„å¯æ‰©å±•æ€§</h3>

                <h4>âš™ï¸ çµæ´»çš„è®¾ç½®ç³»ç»Ÿ</h4>
                <pre><code># config/settings.py - æ˜“äºæ‰©å±•çš„é…ç½®
class Settings:
    def __init__(self):
        # æ ¸å¿ƒè®¾ç½®
        self.server_name = os.getenv("MCP_SERVER_NAME", "quick-data-mcp")
        self.version = "0.1.0"
        
        # å¯æ‰©å±•çš„åŠŸèƒ½å¼€å…³
        self.enable_advanced_analytics = os.getenv("ENABLE_ADVANCED", "true").lower() == "true"
        self.max_dataset_size_mb = int(os.getenv("MAX_DATASET_SIZE", "500"))
        
        # å¤–éƒ¨æœåŠ¡é›†æˆ
        self.openai_api_key = os.getenv("OPENAI_API_KEY")
        self.enable_ai_insights = bool(self.openai_api_key)
        
    @property
    def feature_flags(self) -> dict:
        """åŠ¨æ€ç‰¹æ€§æ ‡å¿—"""
        return {
            "advanced_analytics": self.enable_advanced_analytics,
            "ai_insights": self.enable_ai_insights,
            "large_datasets": self.max_dataset_size_mb > 100
        }</code></pre>

                <h3>7.4 æ’ä»¶åŒ–æ¶æ„å±•æœ›</h3>

                <div class="warning-section">
                    <h3>âš ï¸ æœªæ¥æ‰©å±•è®¡åˆ’</h3>
                    <p>ä»¥ä¸‹æ˜¯è®¡åˆ’ä¸­çš„é«˜çº§å¯æ‰©å±•æ€§åŠŸèƒ½ï¼Œç›®å‰å°šæœªå®ç°ï¼š</p>
                </div>

                <h4>ğŸ”Œ æ’ä»¶å‘ç°æœºåˆ¶</h4>
                <pre><code># æœªæ¥çš„è‡ªåŠ¨æ’ä»¶å‘ç°ï¼ˆæ¦‚å¿µè®¾è®¡ï¼‰
class PluginManager:
    @staticmethod
    def discover_plugins():
        """è‡ªåŠ¨å‘ç°å¹¶åŠ è½½æ’ä»¶"""
        for plugin_dir in Path("plugins").iterdir():
            if plugin_dir.is_dir() and (plugin_dir / "__init__.py").exists():
                plugin = importlib.import_module(f"plugins.{plugin_dir.name}")
                if hasattr(plugin, 'register_tools'):
                    plugin.register_tools(mcp)
                if hasattr(plugin, 'register_prompts'):
                    plugin.register_prompts(mcp)</code></pre>

                <h4>ğŸ“Š åˆ†æå¼•æ“æŠ½è±¡</h4>
                <pre><code># å¯æ‰©å±•çš„åˆ†æå¼•æ“æ¥å£ï¼ˆæ¦‚å¿µè®¾è®¡ï¼‰
class AnalysisEngine(ABC):
    @abstractmethod
    async def analyze(self, dataset: pd.DataFrame, params: dict) -> dict:
        pass

class PandasEngine(AnalysisEngine):
    async def analyze(self, dataset, params):
        # å½“å‰çš„ Pandas å®ç°
        pass

class SparkEngine(AnalysisEngine):
    async def analyze(self, dataset, params):
        # å¤§æ•°æ® Spark å®ç°
        pass</code></pre>

                <h3>7.5 å½“å‰å¯æ‰©å±•æ€§ä¼˜åŠ¿</h3>

                <div class="success-section">
                    <h3>âœ… å·²å®ç°çš„å¯æ‰©å±•æ€§ç‰¹æ€§</h3>
                    <ul>
                        <li><strong>é›¶é…ç½®æ•°æ®é›†æ”¯æŒ</strong>ï¼šæ–°æ•°æ®æ ¼å¼é€šè¿‡ä¿®æ”¹ DatasetManager å³å¯æ”¯æŒ</li>
                        <li><strong>æ™ºèƒ½åˆ†æå»ºè®®</strong>ï¼šåŸºäºæ•°æ®ç‰¹å¾è‡ªåŠ¨æ¨èé€‚ç”¨çš„åˆ†ææ–¹æ³•</li>
                        <li><strong>åŠ¨æ€èµ„æºç³»ç»Ÿ</strong>ï¼šæ”¯æŒä»»æ„æ•°æ®é›†çš„å‚æ•°åŒ–èµ„æºè®¿é—®</li>
                        <li><strong>æ¨¡å—åŒ–å·¥å…·åŒ…</strong>ï¼šæ¯ä¸ªå·¥å…·ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²</li>
                        <li><strong>ä¸Šä¸‹æ–‡æ„ŸçŸ¥æç¤º</strong>ï¼šæç¤ºå†…å®¹æ ¹æ®æ•°æ®ç‰¹å¾åŠ¨æ€ç”Ÿæˆ</li>
                        <li><strong>çµæ´»çš„é”™è¯¯å¤„ç†</strong>ï¼šç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼ï¼Œæ˜“äºè°ƒè¯•</li>
                    </ul>
                </div>

                <h4>ğŸ¯ æ‰©å±•æ€§æœ€ä½³å®è·µ</h4>
                <ol>
                    <li><strong>éµå¾ªç°æœ‰æ¨¡å¼</strong>ï¼šæ–°åŠŸèƒ½åº”è¯¥ç¬¦åˆç°æœ‰çš„ä»£ç ç»“æ„å’Œå‘½åçº¦å®š</li>
                    <li><strong>å®Œæ•´çš„æµ‹è¯•è¦†ç›–</strong>ï¼šæ¯ä¸ªæ–°ç»„ä»¶éƒ½åº”è¯¥æœ‰å¯¹åº”çš„å•å…ƒæµ‹è¯•</li>
                    <li><strong>æ–‡æ¡£å…ˆè¡Œ</strong>ï¼šæ–°åŠŸèƒ½çš„æ–‡æ¡£å­—ç¬¦ä¸²åº”è¯¥æ¸…æ™°æè¿°ç”¨é€”å’Œå‚æ•°</li>
                    <li><strong>æ¸è¿›å¼å¢å¼º</strong>ï¼šæ–°åŠŸèƒ½åº”è¯¥å‘åå…¼å®¹ï¼Œä¸ç ´åç°æœ‰åŠŸèƒ½</li>
                    <li><strong>æ€§èƒ½è€ƒè™‘</strong>ï¼šå¤§æ•°æ®å¤„ç†åŠŸèƒ½åº”è¯¥è€ƒè™‘å†…å­˜å’Œè®¡ç®—æ•ˆç‡</li>
                </ol>
            </section>

            <section id="best-practices">
                <h2>8. æœ€ä½³å®è·µ</h2>

                <h3>8.1 ä»£ç è´¨é‡è§„èŒƒ</h3>

                <h4>ğŸ“ æ–‡æ¡£å­—ç¬¦ä¸²æ ‡å‡†</h4>
                <pre><code>async def example_function(param1: str, param2: int = 5) -> dict:
    """
    åŠŸèƒ½çš„ç®€çŸ­æè¿°ï¼ˆä¸€å¥è¯ï¼‰ã€‚
    
    æ›´è¯¦ç»†çš„åŠŸèƒ½æè¿°ï¼Œè§£é‡Šè¿™ä¸ªå‡½æ•°çš„ä½œç”¨ï¼Œä½¿ç”¨åœºæ™¯ï¼Œ
    ä»¥åŠä»»ä½•é‡è¦çš„æ³¨æ„äº‹é¡¹ã€‚
    
    Args:
        param1: å‚æ•°1çš„æè¿°ï¼Œè¯´æ˜ç±»å‹å’Œç”¨é€”
        param2: å‚æ•°2çš„æè¿°ï¼ŒåŒ…æ‹¬é»˜è®¤å€¼è¯´æ˜
        
    Returns:
        dict: è¿”å›å€¼çš„æè¿°ï¼Œè¯´æ˜å­—å…¸çš„ç»“æ„å’Œå«ä¹‰
        
    Raises:
        ValueError: ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸
        
    Examples:
        >>> result = await example_function("test", 10)
        >>> print(result["status"])
        "success"
    """</code></pre>

                <h4>ğŸ¯ é”™è¯¯å¤„ç†æ¨¡å¼</h4>
                <pre><code># æ ‡å‡†é”™è¯¯å¤„ç†æ¨¡å¼
async def robust_analysis(dataset_name: str, params: dict) -> dict:
    try:
        # 1. è¾“å…¥éªŒè¯
        if not dataset_name:
            return {
                "status": "error",
                "error_type": "validation_error",
                "message": "æ•°æ®é›†åç§°ä¸èƒ½ä¸ºç©º"
            }
        
        # 2. æ•°æ®è·å–
        try:
            df = DatasetManager.get_dataset(dataset_name)
        except ValueError as e:
            return {
                "status": "error", 
                "error_type": "dataset_not_found",
                "message": f"æ•°æ®é›† '{dataset_name}' æœªåŠ è½½ï¼š{str(e)}"
            }
        
        # 3. ä¸šåŠ¡é€»è¾‘
        result = perform_analysis(df, params)
        
        # 4. æˆåŠŸå“åº”
        return {
            "status": "success",
            "dataset_name": dataset_name,
            "analysis_type": "robust_analysis",
            "results": result,
            "metadata": {
                "timestamp": datetime.now().isoformat(),
                "rows_processed": len(df)
            }
        }
        
    except Exception as e:
        # 5. æœªé¢„æœŸé”™è¯¯
        return {
            "status": "error",
            "error_type": "unexpected_error", 
            "message": f"åˆ†æè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼š{str(e)}",
            "debug_info": {
                "function": "robust_analysis",
                "parameters": {"dataset_name": dataset_name}
            }
        }</code></pre>

                <h3>8.2 æ€§èƒ½ä¼˜åŒ–å®è·µ</h3>

                <h4>ğŸ’¾ å†…å­˜ç®¡ç†</h4>
                <pre><code># å†…å­˜æ•ˆç‡çš„æ•°æ®å¤„ç†
async def memory_efficient_analysis(dataset_name: str) -> dict:
    try:
        df = DatasetManager.get_dataset(dataset_name)
        
        # 1. æ£€æŸ¥æ•°æ®é›†å¤§å°
        memory_usage = df.memory_usage(deep=True).sum() / 1024**2  # MB
        if memory_usage > 500:  # 500MB é˜ˆå€¼
            # å»ºè®®é‡‡æ ·æˆ–åˆ†å—å¤„ç†
            return {
                "status": "warning",
                "message": f"æ•°æ®é›†è¿‡å¤§ï¼ˆ{memory_usage:.1f}MBï¼‰ï¼Œå»ºè®®å…ˆé‡‡æ ·",
                "suggestions": [
                    f"ä½¿ç”¨é‡‡æ ·ï¼šload_dataset(path, '{dataset_name}', sample_size=10000)",
                    "è€ƒè™‘æ•°æ®é¢„å¤„ç†é™ä½å†…å­˜ä½¿ç”¨"
                ]
            }
        
        # 2. åˆ†å—å¤„ç†å¤§å‹è®¡ç®—
        chunk_size = min(1000, len(df))
        results = []
        
        for i in range(0, len(df), chunk_size):
            chunk = df.iloc[i:i+chunk_size]
            chunk_result = process_chunk(chunk)
            results.append(chunk_result)
            
        # 3. åˆå¹¶ç»“æœ
        final_result = merge_chunk_results(results)
        
        return {
            "status": "success",
            "results": final_result,
            "performance_info": {
                "memory_used_mb": memory_usage,
                "chunks_processed": len(results)
            }
        }
        
    except MemoryError:
        return {
            "status": "error",
            "error_type": "memory_error",
            "message": "å†…å­˜ä¸è¶³ï¼Œè¯·å‡å°‘æ•°æ®é›†å¤§å°æˆ–ä½¿ç”¨é‡‡æ ·"
        }</code></pre>

                <h3>8.3 æµ‹è¯•ç­–ç•¥</h3>

                <h4>ğŸ§ª æµ‹è¯•å±‚æ¬¡</h4>
                <pre><code># 1. å•å…ƒæµ‹è¯• - æµ‹è¯•å•ä¸ªå‡½æ•°
@pytest.mark.asyncio
async def test_basic_functionality():
    """æµ‹è¯•åŸºæœ¬åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ"""
    result = await my_function("valid_input")
    assert result["status"] == "success"

# 2. é›†æˆæµ‹è¯• - æµ‹è¯•æ¨¡å—é—´äº¤äº’
@pytest.mark.asyncio  
async def test_end_to_end_workflow():
    """æµ‹è¯•å®Œæ•´çš„åˆ†æå·¥ä½œæµ"""
    # åŠ è½½æ•°æ®
    load_result = await load_dataset("test.csv", "test_data")
    assert load_result["status"] == "success"
    
    # æ‰§è¡Œåˆ†æ
    analysis_result = await my_analysis("test_data")
    assert analysis_result["status"] == "success"
    
    # éªŒè¯ç»“æœ
    assert "results" in analysis_result

# 3. é”™è¯¯åœºæ™¯æµ‹è¯•
@pytest.mark.asyncio
async def test_error_scenarios():
    """æµ‹è¯•å„ç§é”™è¯¯æƒ…å†µçš„å¤„ç†"""
    # æ•°æ®é›†ä¸å­˜åœ¨
    result = await my_function("nonexistent")
    assert result["status"] == "error"
    assert "not found" in result["message"].lower()
    
    # æ— æ•ˆå‚æ•°
    result = await my_function("", invalid_param=True)
    assert result["status"] == "error"</code></pre>

                <h3>8.4 MCP ç‰¹å®šæœ€ä½³å®è·µ</h3>

                <h4>ğŸ”§ å·¥å…·è®¾è®¡åŸåˆ™</h4>
                <ul>
                    <li><strong>å•ä¸€èŒè´£</strong>ï¼šæ¯ä¸ªå·¥å…·åªåšä¸€ä»¶äº‹ï¼Œåšå¥½ä¸€ä»¶äº‹</li>
                    <li><strong>å¹‚ç­‰æ€§</strong>ï¼šç›¸åŒè¾“å…¥åº”äº§ç”Ÿç›¸åŒè¾“å‡º</li>
                    <li><strong>çŠ¶æ€æ— å…³</strong>ï¼šå·¥å…·ä¸åº”ä¾èµ–å…¨å±€çŠ¶æ€ï¼ˆé™¤äº†æ•°æ®é›†å­˜å‚¨ï¼‰</li>
                    <li><strong>å‚æ•°éªŒè¯</strong>ï¼šä¸¥æ ¼éªŒè¯è¾“å…¥å‚æ•°</li>
                    <li><strong>ç»“æœæ ‡å‡†åŒ–</strong>ï¼šä½¿ç”¨ç»Ÿä¸€çš„å“åº”æ ¼å¼</li>
                </ul>

                <h4>ğŸ’¬ æç¤ºè®¾è®¡åŸåˆ™</h4>
                <ul>
                    <li><strong>ä¸Šä¸‹æ–‡æ„ŸçŸ¥</strong>ï¼šåŸºäºå½“å‰æ•°æ®çŠ¶æ€ç”Ÿæˆä¸ªæ€§åŒ–å†…å®¹</li>
                    <li><strong>å¯æ“ä½œæ€§</strong>ï¼šæä¾›å…·ä½“çš„å‘½ä»¤å’Œæ­¥éª¤</li>
                    <li><strong>å±‚æ¬¡åŒ–ä¿¡æ¯</strong>ï¼šä»æ¦‚è§ˆåˆ°è¯¦ç»†ï¼Œæ»¡è¶³ä¸åŒéœ€æ±‚</li>
                    <li><strong>ä¸šåŠ¡å¯¼å‘</strong>ï¼šè¿æ¥æŠ€æœ¯åˆ†æä¸ä¸šåŠ¡ä»·å€¼</li>
                    <li><strong>æ¸è¿›å¼å¼•å¯¼</strong>ï¼šä»ç®€å•åˆ°å¤æ‚çš„å­¦ä¹ è·¯å¾„</li>
                </ul>

                <h4>ğŸ“ˆ èµ„æºè®¾è®¡åŸåˆ™</h4>
                <ul>
                    <li><strong>å®æ—¶æ€§</strong>ï¼šåæ˜ å½“å‰ç³»ç»ŸçŠ¶æ€</li>
                    <li><strong>å‚æ•°åŒ–</strong>ï¼šæ”¯æŒçµæ´»çš„æ•°æ®è®¿é—®æ¨¡å¼</li>
                    <li><strong>è½»é‡çº§</strong>ï¼šå¿«é€Ÿå“åº”ï¼Œé¿å…é‡è®¡ç®—</li>
                    <li><strong>ç»“æ„åŒ–</strong>ï¼šæ¸…æ™°çš„æ•°æ®ç»“æ„ä¾¿äºå¤„ç†</li>
                    <li><strong>ç‰ˆæœ¬å…¼å®¹</strong>ï¼šä¿æŒå‘åå…¼å®¹æ€§</li>
                </ul>

                <div class="success-section">
                    <h3>âœ… å¼€å‘æ£€æŸ¥æ¸…å•</h3>
                    <h4>æ–°åŠŸèƒ½å¼€å‘å‰ï¼š</h4>
                    <ul>
                        <li>â˜ é˜…è¯»ç°æœ‰ä»£ç ï¼Œç†è§£å®ç°æ¨¡å¼</li>
                        <li>â˜ ç¡®å®šåŠŸèƒ½åˆ†ç±»ï¼ˆTool/Prompt/Resourceï¼‰</li>
                        <li>â˜ è®¾è®¡è¾“å…¥è¾“å‡ºæ¥å£</li>
                        <li>â˜ è§„åˆ’æµ‹è¯•ç”¨ä¾‹</li>
                    </ul>
                    
                    <h4>å¼€å‘è¿‡ç¨‹ä¸­ï¼š</h4>
                    <ul>
                        <li>â˜ éµå¾ªå‘½åçº¦å®š</li>
                        <li>â˜ æ·»åŠ å®Œæ•´çš„æ–‡æ¡£å­—ç¬¦ä¸²</li>
                        <li>â˜ å®ç°é”™è¯¯å¤„ç†</li>
                        <li>â˜ ç¼–å†™å•å…ƒæµ‹è¯•</li>
                    </ul>
                    
                    <h4>å¼€å‘å®Œæˆåï¼š</h4>
                    <ul>
                        <li>â˜ è¿è¡Œæ‰€æœ‰æµ‹è¯•</li>
                        <li>â˜ éªŒè¯ MCP é›†æˆ</li>
                        <li>â˜ æ›´æ–°ç›¸å…³æ–‡æ¡£</li>
                        <li>â˜ ä»£ç å®¡æŸ¥</li>
                    </ul>
                </div>
            </section>
        </main>

        <footer>
            <div style="margin-top: 40px; padding-top: 20px; border-top: 2px solid #3498db; text-align: center; color: #7f8c8d;">
                <p><strong>ğŸ“š quick-data-mcp æŠ€æœ¯æŒ‡å—</strong></p>
                <p>ç”Ÿæˆæ—¶é—´ï¼š2025å¹´9æœˆ22æ—¥ | é¡¹ç›®ç‰ˆæœ¬ï¼š0.1.0</p>
                <p>ğŸ”— <a href="https://github.com/your-repo/quick-data-mcp" style="color: #3498db;">é¡¹ç›®ä»“åº“</a> | 
                   ğŸ“– <a href="https://docs.anthropic.com/en/docs/claude-code/overview" style="color: #3498db;">Claude Code æ–‡æ¡£</a></p>
            </div>
        </footer>
    </article>

    <script>
        // æ·»åŠ å±•å¼€/æ”¶ç¼©åŠŸèƒ½
        document.querySelectorAll('.expandable').forEach(element => {
            element.addEventListener('click', () => {
                const target = element.nextElementSibling;
                if (target) {
                    target.classList.toggle('collapsed');
                    element.textContent = target.classList.contains('collapsed') ? 
                        element.textContent.replace('â–¼', 'â–¶') : 
                        element.textContent.replace('â–¶', 'â–¼');
                }
            });
        });

        // å¹³æ»‘æ»šåŠ¨åˆ°é”šç‚¹
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // ä»£ç å—å¤åˆ¶åŠŸèƒ½
        document.querySelectorAll('pre code').forEach(block => {
            const button = document.createElement('button');
            button.textContent = 'å¤åˆ¶';
            button.style.cssText = `
                position: absolute;
                top: 8px;
                right: 8px;
                background: #3498db;
                color: white;
                border: none;
                padding: 4px 8px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 12px;
            `;
            
            const pre = block.parentElement;
            pre.style.position = 'relative';
            pre.appendChild(button);
            
            button.addEventListener('click', () => {
                navigator.clipboard.writeText(block.textContent).then(() => {
                    button.textContent = 'å·²å¤åˆ¶!';
                    setTimeout(() => button.textContent = 'å¤åˆ¶', 1000);
                });
            });
        });
    </script>
</body>
</html>